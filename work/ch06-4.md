<!-- 컨테이너로 이미지 만들기 -->
# 이미 존재하는 컨테이너를 이용하면 누구나 쉽게 이미지를 만들 수 있다.

# 이미지를 만드는 방법에는 두 가지가 있다.
# 첫번째는 commit 커맨드로 기존 컨테이너를 이미지로 변환하는 방법이고, 두번째는 Dockerfile 스크립트로 이미지를 만드는 방법이다.

<!-- commit 커맨드로 컨테이너를 이미지로 변환 -->
# 컨테이너를 준비하고 컨테이너를 이미지로 변환한다, 컨테이너만 있으면 명령어 한 번으로 이미지를 만들 수 있어 간편하지만 컨테이너를 먼저 만들어야 한다.
# 기존 컨테이너를 복제하거나 이동해야 할 때 편리하다

# 컨테이너를 이미지로 변환
docker commit 컨테이너_이름 새로운_이미지_이름

<!-- Dockerfile 스크립트로 이미지 만들기 -->
# Dockerfile 스크립트를 작성하고 이 스크립트를 빌드해 이미지를 만드는 방법이다.
# Dockerfile은 이름만 보면 여러가지 목적으로 사용할 수 있을 것 같지만 사실은 이미지를 만드는 것밖에 할 수 없다. 말하자면 '도커 이미지 파일'정도의 존재다.

# Dockerfile 스크립트에는 토대가 될 이미지나 실행할 명령어 등을 기재한다. 편집은 메모장 같은 텍스트 에디터를 사용한다.

# 이 파일을 호스트 컴퓨터의 이미지 재료가 들어있는 폴더에 넣는데. 재료 폴더에는 그 외 컨테이너에 넣을 파일을 함께 둔다. 실제 컨테이너를 만들 필요는 없다

# Dockerfile 스크립트로 이미지 만들기
docker build -t 생성할_이미지_이름 재료_폴더_경로

# 주요 dOCKERFILE 이느트럭션
FROM          - 토대가 되는 이미지를 지정 
ADD           - 이미지에 파일이나 폴더를 추가
COPY          - 이미지에 파일이나 폴더를 추가
RUN           - 이미지를 빌드할 때 실행할 명령어를 지정
CMD           - 컨테이너를 실행할 때 실행할 명령어를 지정
ENTRYPOINT    - 컨테이너를 실행할 때 실행할 명령어를 강제 지정
ONBUILD       - 이 이미지를 기반으로 다른 이미지를 빌드할 때 실행할 명령어를 지정
EXPOSE        - 이미지가 통신에 사용할 포트를 명시적으로 지정
VOLUME        - 퍼시스턴시 데이터를 저장할 경로를 명시적으로 지정
ENV           - 환경변수를 정의
WORKDIR       - RUN , CMD , ENTRYPOINT, ADD, COPY에 정의된 명령어를 실행하는 작업 디렉터리를 지정
SHELL         - 빌드 시 사용할 셀을 변경
LABEL         - 이름이나 버전, 저작자 정보를 설정
ARG           - docker build 커맨드를 사용할 때 입력받을 수 있는 인자를 선언
STOPSIGNAL    - docker stop 커맨드를 사용할 때 컨테이너 안에서 실행 중인 프로그램에 전달되는 시그널을 변경
HEALTHCHECK   - 컨테이너 헬스체크 방법을 커스터마이징

<!-- 이미지를 옮기는 방법 -->
# 컨테이너는 먼저 이미지로 변환하지 않으면 옮기거나 복사할 수 없다. 하지만 이미지 역시 이미지 상태 그대로는 옮기거나 복사할 수 없으믈 도커 레지스트리를 통하거나 save 커맨드를 사용해 tar 포맷으로 도커 엔진의 관리 영역 밖으로 내보내야 한다. 파일은 호스트 컴퓨터의 파일 시스템에 생성된다
# 파일을 다시 도커 엔진에 가져오려면 load 커맨드를 사용한다.

# tar 파일 생성
docker save -o 파일_이름.tar 이미지_이름


